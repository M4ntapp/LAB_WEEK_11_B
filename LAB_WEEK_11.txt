1. The part of the code that handles the creation of the path and the URI for the picture is inside the `ProviderFileManager.kt` file, specifically in the `generatePhotoUri` function. Here is the code:

   fun generatePhotoUri(time: Long): FileInfo {
       val name = "img_$time.jpg"
       // Get the file object
       // The file will be stored in the folder defined in file_provider_paths.xml
       val file = File(
           context.getExternalFilesDir(fileHelper.getPicturesFolder()),
           name
       )
       return FileInfo(
           fileHelper.getUriFromFile(file),
           file,
           name,
           fileHelper.getPicturesFolder(),
           "image/jpeg"
       )
   }

2. Attributes in FileInfo.kt:
   - uri: This refers to the Content URI generated by the FileProvider (e.g., content://com.example...). It serves as a secure, temporary reference to the file location that allows external applications (like the Camera app) to access and write data to our app's private storage.

   - relativePath: This refers to the standard directory name within the shared storage where the file logically belongs, such as Environment.DIRECTORY_PICTURES ("Pictures") or Environment.DIRECTORY_MOVIES ("Movies"). This is used when inserting the file into the MediaStore so the system knows which folder to display the image/video in.

3. Chronological order from taking a picture until stored in MediaStore:
   a. The user clicks the "Photo" button in MainActivity.
   b. `openImageCapture()` calls `providerFileManager.generatePhotoUri()`. This creates a temporary file object in the app's external files directory and generates a Content URI using FileProvider.
   c. `takePictureLauncher.launch(uri)` opens the external Camera app, passing the Content URI.
   d. The user takes a photo. The Camera app writes the image data directly into the URI provided (the temporary file).
   e. The user confirms the photo. Control returns to `MainActivity` via the `takePictureLauncher` callback.
   f. The callback calls `providerFileManager.insertImageToStore(photoInfo)`.
   g. `ProviderFileManager` prepares `ContentValues` (metadata) using `MediaContentHelper`.
   h. `ProviderFileManager` inserts this metadata into the `MediaStore` (Gallery database) to create a new entry and get a destination URI.
   i. `ProviderFileManager` opens an InputStream from the temporary file (FileProvider URI) and an OutputStream to the destination file (MediaStore URI).
   j. `IOUtils.copy` copies the actual image data from the temporary file to the public MediaStore.